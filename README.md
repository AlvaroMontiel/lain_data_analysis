# Informe epidemiológico lesiones autoinfligidas (LAIN).

---

## Resumen ejecutivo


 ---

## **Tabla de contenidos**
1. [Resumen ejecutivo](#resumen-ejecutivo)
2. [Introducción](#introducción)
2. [Especificaciones del proyecto](#especificaciones-del-proyecto)
3. [Metodología](#metodología)
   1. [Estrategia de limpieza de datos](#estrategia-de-limpieza-de-datos)
      1. [Calidad del conjunto de datos](#calidad-del-conjunto-de-datos)
      2. [Matriz de validaciones y reglas de negocio](#matriz-de-validaciones-y-reglas-de-negocio)
      3. [Reglas de detección y eliminación de duplicados](#reglas-de-detección-y-eliminación-de-duplicados)
4. [Resultados](#resultados)
5. [Conclusiones](#conclusiones)
6. [Discusión](#discusión)

---
## Introducción


 
---

## Especificaciones del proyecto

### Requirements
- Python 3.11+
- Librerías detalladas en requirements.txt

### Instrucciones de uso
1. Clonar el repositorio
2. Crear y activar el entorno virtual (ver secciones debajo)
3. Instalar dependencias
4. Ejecutar el archivo app.py

---
## Metodología

### Estrategia de limpieza de datos
A continuación se describe de forma detallada cómo se validan, limpian y transforman los datos de la base de 
lesiones autoinfligidas a nivel nacional. El objetivo principal es asegurar que la información final resulte confiable, 
coherente y lista para ser utilizada en análisis estadísticos y toma de decisiones.

En concreto, se explican:
1. Los tipos de validaciones y reglas de negocio aplicadas a cada variable.
2. Cómo se manejan los valores ausentes, duplicados y formatos inesperados.
3. Qué variables se consideran relevantes para los análisis y cuáles se descartan.

#### Calidad del conjunto de datos
Para garantizar la calidad del conjunto de datos, se siguen estos pasos:

1. **Validación de Tipos de Dato** 
    - Se verifica que cada columna coincida con el tipo de dato esperado (numérico, categórico o fecha).
    - Si la conversión no es posible se imputan valores según las reglas de negocio y se procede a reintentar 
   la conversión.


2. **Listas de Valores Válidos**
    - Para las columnas categóricas, se define un listado de respuestas aceptadas (por ejemplo, lista de 
   regiones o comunas).
    - Si un valor no coincide, se imputa como “NaN” (valor nulo). Posteriormente se imputan los datos de 
   acuerdo a las reglas de negocio.

   
3. **Revisión de Consistencia**
    - Se aplican reglas que relacionan variables entre sí (por ejemplo, si la variable “Región” está vacía pero “Comuna”
   está disponible, se rellena automáticamente la región que corresponde a esa comuna).
    - Se ignoran o marcan como inconsistentes casos que no cumplen con las condiciones definidas
   (por ejemplo, la fecha de fin de caso no puede ser anterior a la fecha de inicio).
   

4. **Eliminación de Duplicados** 
    - Se identifican registros repetidos (por ejemplo, mismo paciente con mismo folio) y se eliminan para evitar sesgos en el análisis.


5. **Imputación de Valores Faltantes**
    - Algunas columnas (como “Región Paciente” o “Comuna Paciente”) no deben tener valores nulos, 
   por lo que se imputan a partir de otras columnas o se asigna un valor por defecto (“No sabe/No responde”).
    - Para otras, se definen reglas específicas (por ejemplo, si “Tiene Antecedentes de Salud Mental” 
   está en blanco pero “Tiene Tratamiento de Salud Mental” es “Sí”, se asume “Sí”).


6. **Mantenibilidad y Testeo** 
    - Las reglas se documentan en esta matriz para que cualquier persona interesada pueda revisar 
   los criterios de limpieza.
    - Se implementan test unitarios y funciones específicas que permiten automatizar y repetir el proceso con 
   cualquier nuevo conjunto de datos del sistema de vigilancia que ingrese al sistema.

#### Matriz de Validaciones y Reglas de Negocio

A continuación, se presenta la **tabla de validaciones** que sintetiza las reglas de negocio y los criterios de calidad para cada variable relevante de la base de datos.  
Nota: Aquí se muestra un resumen de la tabla. Para ver la versión completa con todos los detalles, se recomienda consultar el documento fuente o un anexo específico.

| Número | Nombre variable                        | Tipo variable | Tipo dato | Valores esperados                                                                                                                                                 | Acepta null | Mantiene en análisis | Observaciones                                                                           | Reglas de validación                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|--------|----------------------------------------|---------------|-----------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------|----------------------|-----------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1      | **Origen Caso**                        | Categórica    | str       | {Notificación LAIN, <br/>Notificación física}                                                                                                                     | No          | No                   | Define la fuente de notificación del evento                                             | No Aplica                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 2      | Nr Folio                               | Numérica      | int       | -                                                                                                                                                                 | No          | Si                   | Identificador numérico único del formulario                                             | 1. Verificar que no tenga campos NaN                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 3      | **Tipo de Caso**                       | Categórica    | str       | {Abierto, <br/>Cerrado, <br/>Descartado}                                                                                                                          | No          | Si                   | Indica la situación general del evento (abierto, cerrado o descartado)                  | 1. Solo incluir casos cerrados<br>2. No incluir datos faltantes                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 4      | Fecha Atencion Urgencia                | Fecha         | date      | -                                                                                                                                                                 | No          | Si                   | Registra la fecha en que el paciente fue atendido en urgencias                          | 1. Verificar que no tenga campos NaN                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 5      | Semana Epidemiológica                  | Numérico      | int       | -                                                                                                                                                                 | No          | Si                   | Indica la semana epidemiológica correspondiente a la fecha de atención                  | 1. Calcular en base a la fecha del evento, si no hay fecha del evento usar la fecha atención urgencia <br>2. Verificar que no tenga campos NaN                                                                                                                                                                                                                                                                                                                                                              |
| 6      | **Estado**                             | Categórica    | str       | {Finalizado,<br/> Guardado Parcial, <br/>Descartado}                                                                                                              | No          | Si                   | Define si el registro está finalizado, guardado parcial o descartado                    | 1. Solo casos finalizados, no incluir datos faltantes                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 7      | **Clasificación**                      | Categórica    | str       | {Confirmado LAIN, <br/>Probable, <br/>Sin Clasificacion}                                                                                                          | Si          | Si                   | Determina el estado en plataforma del evento (confirmado, probable o sin clasificación) | 1. Solo casos Confirmado LAIN, no incluir datos faltantes                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 8      | **Subclasificacion**                   | Categórica    | str       | {Sin subclasificacion, <br/>Con intención suicida,<br/> Sin intención suicida,<br/> No se puede determinar intención suicida}                                     | Si          | Si                   | Precisa la intencionalidad o tipo de subclasificación del evento                        | 1. Solo casos con Con intención suicida y Sin intención suicida, no incluir datos faltantes                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 9      | Fecha Finalizacion                     | Fecha         | date time | -                                                                                                                                                                 | Si          | No                   | Indica la fecha de cierre del evento con fines de seguimiento                           | No Aplica                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 10     | Días en Bandeja                        | Numérica      | int       | -                                                                                                                                                                 | No          | No                   | Tiempo que el evento permaneció en espera antes de ser gestionado                       | No Aplica                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 11     | **Región**                             | Categórica    | str       | {Listado de regiones del país}                                                                                                                                    | No          | Si                   | Ubicación geopolítica donde se notifica el evento                                       | 1. Lista con las respuestas, si no esta en la lista imputar NaN <br>2. Si Región es NaN y Comuna tiene datos, se asigna la región de la comuna a la que pertenece el evento. <br>3. Si Región es NaN y Establecimiento de Salud tiene datos, se asigna la región a la que pertenece el establecimiento<br>4. Si Región es NaN imputar No sabe/No responde                                                                                                                                                   |
| 12     | **Comuna**                             | Categórica    | str       | {Listado de comunas del país}                                                                                                                                     | No          | Si                   | Unidad administrativa (comuna) donde se notifica el evento                              | 1. Lista con las respuestas, si no esta en la lista imputar NaN <br>2. Si Comuna es NaN y Establecimiento tiene datos imputar comuna a la que pertenece el establecimiento<br>3. Si comuna es NaN imputar No sabe/No responde                                                                                                                                                                                                                                                                               |
| 13     | **Establecimiento de Salud**           | Categórica    | str       | {Listado de establecimientos DEIS}                                                                                                                                | Si          | Si                   | Centro o institución de salud donde se registró el evento                               | 1. Lista con las respuestas, si no esta en la lista imputar NaN <br>2. Crear nueva variable que extraiga la pertenencia del establecimiento de la BD de establecimientos DEIS.<br>3. Si Establecimiento de Salud es NaN imputar No sabe/No responde                                                                                                                                                                                                                                                         |
| 14     | **Dependencia**                        | Categórica    | str       | {Fuerzas Armadas y de Orden, <br/>Privado,<br/> Público}                                                                                                          | Si          | Si                   | Tipo de dependencia del establecimiento (por ejemplo, público, privado)                 | 1. Lista con las respuestas, si no esta en la lista imputar NaN <br>2. Si Dependencia es NaN imputar No sabe/No responde                                                                                                                                                                                                                                                                                                                                                                                    |
| 15     | RUT Profesional                        | -             | str       | {Texto libre}                                                                                                                                                     | Si          | No                   | Documento de identificación del profesional a cargo                                     | No Aplica                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 16     | Nombre Profesional                     | -             | str       | {Texto libre}                                                                                                                                                     | Si          | No                   | Nombre completo del profesional                                                         | No Aplica                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 17     | Telefono Profesional                   | -             | str       | {Texto libre}                                                                                                                                                     | Si          | No                   | Teléfono de contacto del profesional                                                    | No Aplica                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 18     | Email Profesional                      | -             | str       | {Texto libre}                                                                                                                                                     | Si          | No                   | Dirección de correo electrónico del profesional                                         | No Aplica                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 19     | **Identificacion Paciente**            | Categórica    | str       | {RUN,<br/> Pasaporte, <br/>Comprobante de Parto,<br/> Identificación Local, <br/>Otro}                                                                            | Si          | Si                   | Tipo de documento que el paciente presenta para identificarse                           | Identificar duplicados en base al rut, nombres, fecha de atención y región de atención del paciente                                                                                                                                                                                                                                                                                                                                                                                                         |
| 20     | ID/RUT Paciente                        | -             | str       | {Texto libre}                                                                                                                                                     | Si          | Si                   | Identificación única del paciente                                                       | Identificar duplicados en base al rut, nombres, fecha de atención y región de atención del paciente                                                                                                                                                                                                                                                                                                                                                                                                         |
| 21     | Nombre Paciente                        | -             | str       | {Texto libre}                                                                                                                                                     | Si          | Si                   | Nombre (o nombres) del paciente                                                         | Identificar duplicados en base al rut, nombres, fecha de atención y región de atención del paciente                                                                                                                                                                                                                                                                                                                                                                                                         |
| 22     | Apellido Parterno Paciente             | -             | str       | {Texto libre}                                                                                                                                                     | Si          | Si                   | Primer apellido del paciente                                                            | Identificar duplicados en base al rut, nombres, fecha de atención y región de atención del paciente                                                                                                                                                                                                                                                                                                                                                                                                         |
| 23     | Apellido Materno Paciente              | -             | str       | {Texto libre}                                                                                                                                                     | Si          | Si                   | Segundo apellido del paciente                                                           | Identificar duplicados en base al rut, nombres, fecha de atención y región de atención del paciente                                                                                                                                                                                                                                                                                                                                                                                                         |
| 24     | **Sexo Paciente**                      | Categórica    | str       | {Hombre,<br/> Mujer,<br/> Intersex (Indeterminado), <br/>Desconocido}                                                                                             | Si          | Si                   | Sexo o condición sexual autodeclarada del paciente                                      | 1. Lista con las respuestas, si no esta en la lista imputar NaN <br>2. Si Establecimiento de Salud es NaN imputar Desconocido                                                                                                                                                                                                                                                                                                                                                                               |
| 25     | Fecha Nacimiento Paciente              | Fecha         | date      | -                                                                                                                                                                 | Si          | Si                   | Fecha de nacimiento del paciente                                                        | 1. Verificar tipo de dato <br/> 2. Aplicar transformaciones necesarias <br/> 3. Eliminar registros nulos                                                                                                                                                                                                                                                                                                                                                                                                    |
| 26     | Edad Paciente                          | Numérico      | int       | -                                                                                                                                                                 | Si          | Si                   | Edad (en años) calculada en la fecha del evento                                         | Calcular a la fecha del evento, revisar y eliminar outliers                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 27     | **Región Paciente**                    | Categórica    | str       | {Listado de regiones del país}                                                                                                                                    | Si          | Si                   | Región de residencia habitual del paciente                                              | 1. Lista con las respuestas, si no esta en la lista imputar NaN <br>2. Si Región Paciente es NaN y Comuna Paciente tiene datos, se asigna la región de la comuna a la que pertenece el evento. <br>3. Si Región Paciente es NaN imputar No sabe/No responde                                                                                                                                                                                                                                                 |
| 28     | **Comuna Paciente**                    | Categórica    | str       | {Listado de comunas del país}                                                                                                                                     | Si          | Si                   | Comuna de residencia habitual del paciente                                              | 1. A los datos faltantes imputar como No sabe/No responde                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 29     | Direccion Paciente                     | -             | str       | {Via residencia + Direccion Paciente}                                                                                                                             | Si          | Si                   | Dirección y vía de residencia del paciente                                              | Normalizar para el análisis geográfico                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 30     | **Se considera pueblo originario**     | Categórica    | str       | {Si,<br/> No, <br/>No hay información}                                                                                                                            | Si          | Si                   | Indica si el paciente se reconoce parte de un pueblo originario                         | 1. Lista con las respuestas, si no esta en la lista imputar NaN <br>2. Si Se considera pueblo originario es NaN imputar No hay información                                                                                                                                                                                                                                                                                                                                                                  |
| 31     | **Pueblo originario**                  | -             | str       | {Texto libre}                                                                                                                                                     | Si          | No                   | Nombre específico del pueblo originario (en texto libre)                                | No Aplica                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 32     | **Se considera afrodescendiente**      | Categórica    | str       | {Si, <br/>No, <br/>No hay información}                                                                                                                            | Si          | Si                   | Indica si el paciente se reconoce como afrodescendiente                                 | 1. Lista con las respuestas, si no esta en la lista imputar NaN <br>2. Si Se condiera afrodescendiente es NaN imputar No hay información                                                                                                                                                                                                                                                                                                                                                                    |
| 33     | **Identidad de Género**                | Categórica    | str       | {Masculino, <br/>Femenina,<br/> Transgenero Masculino,<br/> Transgenero Femenina, <br/>No Binarie, <br/>No hay Información, <br/>Otra}                            | Si          | Si                   | Refleja la autopercepción de género del paciente                                        | 1. Lista con las respuestas, si no esta en la lista imputar NaN <br>2. Si Identidad de Género es NaN imputar No hay información                                                                                                                                                                                                                                                                                                                                                                             |
| 34     | **Orientacion Sexual**                 | Categórica    | str       | {Heterosexual,<br/> Homosexual (gay/lesbiana),<br/> Bisexual,<br/> No sabe/no responde}                                                                           | Si          | Si                   | Describe la orientación sexual declarada por el paciente                                | 1. Lista con las respuestas, si no esta en la lista imputar NaN <br>2. Si Orientacion Sexual es NaN imputar No sabe/no responde                                                                                                                                                                                                                                                                                                                                                                             |
| 35     | **Nacionalidad Paciente**              | Categórica    | str       | {Listado de países}                                                                                                                                               | Si          | Si                   | País de nacionalidad del paciente                                                       | 1. Lista con las respuestas, si no esta en la lista imputar NaN <br>2. Si Nacionalidad Paciente es NaN imputar No sabe/no responde<br>3. Crear nueva variable Chileno, Extranjero, No sabe/no responde.                                                                                                                                                                                                                                                                                                     |
| 36     | **Persona Bajo Cuidado**               | Categórica    | str       | {Listado de variables}                                                                                                                                            | Si          | No                   | Indica si el paciente está bajo cuidado institucional (ej. Residencias, ELEAM, etc.)    | No Aplica                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 37     | **Acompañante del Paciente**           | Categórica    | str       | {Esposo/a o pareja,<br/> Hijo/a,<br/> Padre o madre, <br/>Otro familiar,<br/> Amigo y otro conocido,<br/> Amigo u otro conocido,<br/> Otro,<br/> Sin acompañante} | Si          | Si                   | Persona que acompaña al paciente durante la atención                                    | 1. Lista con las respuestas, si no esta en la lista imputar NaN<br>2. Los datos NaN quedarán como No sabe/No responde                                                                                                                                                                                                                                                                                                                                                                                       |
| 38     | Nombre acompañante                     | -             | str       | {Texto libre}                                                                                                                                                     | Si          | No                   | Nombre completo del acompañante                                                         | No Aplica                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 39     | Telefono acompañante                   | Categórica    | str       | {Móvil, Fijo}                                                                                                                                                     | Si          | No                   | Tipo de teléfono del acompañante (móvil o fijo)                                         | No Aplica                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 40     | Numero acompañante                     | -             | str       | {Texto libre}                                                                                                                                                     | Si          | No                   | Número de teléfono del acompañante                                                      | No Aplica                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 41     | **Lesion fue Autoinflingida**          | Categórica    | str       | {Si, <br/>No sabe / No responde}                                                                                                                                  | Si          | No                   | Confirma si la lesión se infligió el propio paciente                                    | No Aplica                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 42     | **Lesion fue intencional**             | Categórica    | str       | {Si, <br/>No sabe / No responde}                                                                                                                                  | Si          | No                   | Indica si hubo una intención deliberada al infligirse la lesión                         | No Aplica                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 43     | **Tuvo intencion de Morir**            | Categórica    | str       | {Si, <br/>No, <br/>No sabe / No responde}                                                                                                                         | Si          | No                   | Registra si el paciente tuvo intención suicida con la autolesión                        | No Aplica                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 44     | **Tiene Antecedentes salud mental**    | Categórica    | str       | {Si, <br/>No, <br/>No sabe/no responde}                                                                                                                           | Si          | Si                   | Indica historial o antecedentes de salud mental                                         | 1. Lista con las respuestas, si no esta en la lista imputar NaN<br>2. Si Tiene Antecedentes salud mental en NaN y Tiene tratamiento salud mental == Si imputar Si<br>3. Los datos NaN quedarán como No sabe/No responde                                                                                                                                                                                                                                                                                     |
| 45     | Antecedentes salud mental              | -             | str       | {Texto libre}                                                                                                                                                     | Si          | No                   | Descripción libre de los antecedentes de salud mental                                   | No Aplica                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 46     | **Tiene tratamiento salud mental**     | Categórica    | str       | {Si, <br/>No, <br/>No sabe/no responde}                                                                                                                           | Si          | Si                   | Indica si el paciente recibe tratamiento por salud mental                               | 1. Lista con las respuestas, si no esta en la lista imputar NaN<br>2. Si Tiene Antecedentes salud mental == Si y Tiene tratamiento salud mental == NaN imputar No sabe/no responde<br>3. Si Tiene Antecedentes salud mental == No sabe/no responde imputar No sabe/no responde en Tiene tratamiento salud mental<br>4. Si Tiene Antecedentes salud mental == No IMPUTAR  Tiene tratamiento salud mental == NaN <br>                                                                                         |
| 47     | Lugar tratamiento salud mental         | -             | str       | {Texto libre}                                                                                                                                                     | Si          | No                   | Establecimiento o lugar donde se da el tratamiento                                      | No Aplica                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 48     | Otros antecedentes de salud relevantes | -             | str       | {Texto libre}                                                                                                                                                     | Si          | No                   | Información adicional sobre la historia clínica del paciente                            | No Aplica                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 49     | **Paciente estudia actualmente**       | Categórica    | str       | {Si, <br/>No, <br/>No puede contestar}                                                                                                                            | Si          | Si                   | Indica si el paciente se encuentra cursando estudios en el momento de la atención       | 1. Lista con las respuestas, si no esta en la lista imputar NaN<br>2. Si el evento tiene Region de estudios imputar Si<br>3. Si el evento tiene Comuna estudios imputar Si<br>4. Los datos NaN quedarán como No sabe/No responde                                                                                                                                                                                                                                                                            |
| 50     | **Region de estudios**                 | Categórica    | str       | {Listado de regiones del país}                                                                                                                                    | Si          | Si                   | Especifica la región donde el paciente cursa estudios                                   | 1.  Lista con las respuestas, si no esta en la lista imputar NaN<br>2. Si el evento tiene Comuna estudios imputar la región que corresponde<br>3. Los datos NaN quedarán como No sabe/No responde                                                                                                                                                                                                                                                                                                           |
| 51     | **Comuna de estudios**                 | Categórica    | str       | {Listado de comunas del país}                                                                                                                                     | Si          | No                   | Comuna donde el paciente cursa estudios                                                 | 1. Lista con las respuestas, si no esta en la lista imputar NaN<br>2. Los datos NaN quedarán como No sabe/No responde                                                                                                                                                                                                                                                                                                                                                                                       |
| 52     | **Nombre establecimiento estudio**     | -             | str       | {Texto libre}                                                                                                                                                     | Si          | No                   | Nombre del establecimiento educacional del paciente                                     | No Aplica                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 53     | **Paciente trabaja actualmente**       | Categórica    | str       | {Si, <br/>No, <br/>No puede contestar}                                                                                                                            | Si          | Si                   | Informa si el paciente se encuentra trabajando en el momento de la atención             | 1. Lista con las respuestas, si no esta en la lista imputar NaN<br>2. Si el evento tiene Region de trabajo imputar Si<br>3. Si el evento tiene Comuna de trabajo imputar Si<br>4. Los datos NaN quedarán como No sabe/No responde                                                                                                                                                                                                                                                                           |
| 54     | **Region de trabajo**                  | Categórica    | str       | {Listado de regiones del país}                                                                                                                                    | Si          | Si                   | Región donde el paciente desempeña su actividad laboral                                 | 1.  Lista con las respuestas, si no esta en la lista imputar NaN<br>2. Si el evento tiene Comuna de trabajo imputar la región que corresponde<br>3. Los datos NaN quedarán como No sabe/No responde                                                                                                                                                                                                                                                                                                         |
| 55     | **Comuna de trabajo**                  | Categórica    | str       | {Listado de comunas del país}                                                                                                                                     | Si          | Si                   | Comuna donde el paciente desarrolla su trabajo                                          | 1. Lista con las respuestas, si no esta en la lista imputar NaN<br>2. Los datos NaN quedarán como No sabe/No responde                                                                                                                                                                                                                                                                                                                                                                                       |
| 56     | **Nombre lugar de trabajo**            | -             | str       | {Texto libre}                                                                                                                                                     | Si          | No                   | Nombre del lugar o institución donde trabaja el paciente                                | No Aplica                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 57     | Fecha del evento                       | Fecha         | date      | -                                                                                                                                                                 | No          | Si                   | Momento en que ocurrió la lesión                                                        | 1. Verificar que no tenga campos NaN                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 58     | **Tipo de evento**                     | Categórica    | str       | {Lesiones, <br/>Intoxicación, <br/>Ahorcamiento, <br/>estrangulamiento o sofocación}                                                                              | Si          | Si                   | Clasifica la naturaleza de la lesión (lesiones físicas, intoxicación, etc.)             | 1. Lista con las respuestas, si no esta en la lista imputar NaN<br>2. Si es NaN y en Metodo de Lesion Por medicamentos, Pro drogas, Por Alcohol, Por plaguicidas, Intoxicación imputar Intoxicación<br>3. Si es NaN y en Metodo de Lesion Arma blanca, Arma de fuego, Lesión por saltar de un lugar elevado, Lesión por colocarse delante de un vehículo, Lesiones imputar Lesiones<br>4. Si es NaN y Metodo de Lesion es Otro imputar Otro<br>5. Los datos NaN quedarán como No sabe/No responde           |
| 59     | **Metodo de Lesion**                   | Categórica    | str       | {Listado de variables}                                                                                                                                            | Si          | No                   | Método específico por el cual se produce la lesión                                      | 1. Lista con las respuestas, si no esta en la lista imputar NaN<br>2. Si es NaN y Tipo de evento es Lesiones imputar Lesiones<br>3. Si es NaN y Tipo de evento es Intoxicación imputar Intoxicación<br>4. Si es NaN y Tipo de evento es Ahorcamiento, estrangulamiento o sofocación imputar Otro<br>5. Si es NaN imputar No sabe/no responde                                                                                                                                                                |
| 60     | Detalle metodo de Lesion               | -             | str       | {Texto libre}                                                                                                                                                     | Si          | No                   | Descripción adicional del método de la lesión                                           | No Aplica                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 61     | **Lugar del evento**                   | Categórica    | str       | {Listados de variables }                                                                                                                                          | Si          | Si                   | Sitio donde ocurrió la lesión (vivienda, vía pública, etc.)                             | 1. Lista con las respuestas, si no esta en la lista imputar NaN<br>2. Si es Nan imputar No sabe/no responde                                                                                                                                                                                                                                                                                                                                                                                                 |
| 62     | Detalle del lugar evento               | -             | str       | {Texto libre}                                                                                                                                                     | Si          | Si                   | Explicación libre sobre la localización del suceso                                      | 1. Conectarse a una API de Chat GPT para que analice el texto                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 63     | Factor Precipitante                    | -             | str       | {Texto libre}                                                                                                                                                     | Si          | Si                   | Causas o motivos que llevaron al evento                                                 | 1. Conectarse a una API de Chat GPT para que analice el texto                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 64     | **Derivacion**                         | Categórica    | str       | {Hospitalización, <br/>Atencion Ambulatoria de Especialidad, <br/>Atencion Ambulatoria no de especialidad AP, <br/>Paciente rechaza derivacion}                   | Si          | Si                   | Tipo de derivación posterior a la atención                                              | 1. Lista con las respuestas, si no esta en la lista imputar NaN<br>2. Si Derivacion == Paciente rechaza derivacion y Derivacion Region O Derivacion comuna != NaN imputar en Derivacion No sabe/no responde<br>3. Si Derivacion == NaN y Derivacion Region O Derivacion comuna != NaN imputar en Derivacion No sabe/no responde<br>4. Si Derivacion == NaN y Derivacion Region Y Derivacion comuna == NaN imputar en Derivacion Paciente sin derivación<br>5. Crear nueva variable Paciente Derivado Si, No |
| 65     | **Derivacion Region**                  | Categórica    | str       | {Listado de regiones del paí}                                                                                                                                     | Si          | Si                   | Región a la que se deriva al paciente                                                   | 1. Lista con las respuestas, si no esta en la lista imputar NaN<br>2. Si es NaN y tiene Derivacion comuna imputar la región que corresponde a la comuna<br>3. Si es NaN y tiene Derivacion Establecimiento imputar la región que corresponde al Establecimiento<br>4. Si Derivacion == Paciente rechaza derivacion y Paciente sin derivación Los datos NaN quedarán como NaN                                                                                                                                |
| 66     | **Derivacion Comuna**                  | Categórica    | str       | {Listado de comunas del país}                                                                                                                                     | Si          | No                   | Comuna donde se deriva el paciente                                                      | No Aplica                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 67     | **Derivacion Establecimiento**         | Categórica    | str       | {Listado de establecimientos DEIS}                                                                                                                                | Si          | Si                   | Centro asistencial al que se deriva el paciente                                         | 1. Lista con las respuestas, si no esta en la lista imputar NaN<br>2. Si es NaN y Derivacion (no incluir paciente rechaza derivacion y Paciente sin derivación) O Derivacion Region O Derivacion Comuna != NaN Derivacion Establecimiento == No sabe/no responde<br>3. Si Derivacion == Paciente rechaza derivacion y Paciente sin derivación Los datos NaN quedarán como NaN                                                                                                                               |
| 68     | Derivacion detalle                     | -             | str       | {Texto libre}                                                                                                                                                     | Si          | No                   | Información específica sobre la derivación                                              | No Aplica                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |


#### Reglas de detección y eliminación de duplicados

1. **Normalización de Datos**
Antes de buscar duplicados, es importante que la información tenga un formato uniforme. Para ello, se aplican los siguientes cambios:
    - **Convertir a minúsculas:** Los campos de "ID/RUT Paciente", "Nombre Paciente", "Apellido Paterno Paciente" y "Apellido Materno Paciente" se pasan a minúsculas.
    - **Eliminar espacios extra:** Se quitan los espacios que estén al inicio o al final de cada campo.
    - **Quitar caracteres especiales:** Se eliminan caracteres que puedan interferir en la comparación de los datos.

2. **Identificación de Duplicados por RUT**
Una vez normalizados los datos, se identifica si existen registros duplicados basándose en el "ID/RUT Paciente" y, además, en la "Fecha del evento".
    - **Agrupación:** Se agrupan los registros que tengan el mismo RUT y que correspondan a la misma fecha.
    - **Selección de registro:** Dentro de cada grupo, se conserva únicamente el registro que contenga la mayor cantidad de información. De este modo, se descarta cualquier otro registro que cumpla con los mismos criterios de RUT y fecha.

3. **Identificación de Duplicados por Nombres y Apellidos**
Si después de aplicar la regla anterior aún se pueden encontrar posibles duplicados, se procede a un segundo nivel de verificación:
    - **Agrupación:** Se agrupan los registros según los campos "Nombre Paciente", "Apellido Paterno Paciente" y "Apellido Materno Paciente", siempre considerando también la "Fecha del evento".
    - **Selección de registro:** Al igual que en el paso anterior, se conserva el registro que presente la mayor cantidad de información para cada grupo, descartando los demás.

   
Gracias a esta estrategia, se logra:

- **Estandarizar y depurar** la información, facilitando su análisis.
- **Minimizar errores** relacionados con duplicados, valores faltantes o inconsistencias lógicas entre variables.
- **Producir datos de alta calidad**, aumentando la confiabilidad de los resultados y conclusiones obtenidas.

Este documento sirve como **guía de referencia** para todos los involucrados (investigadores, personal de salud, 
analistas de datos, etc.) sobre cómo se lleva a cabo la validación y limpieza de la información. Con ello, se refuerza
la transparencia y se garantizan buenas prácticas de gestión de datos.

--- 
## Resultados



---
## Conclusiones



---
## Discusión



---
    





